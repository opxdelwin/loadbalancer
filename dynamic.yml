http:
  routers:
    my-router:
      rule: "Host(`loadbalancer.plansync.in`)"
      service: my-service
      entryPoints:
        - websecure
      middlewares:
        - forward-headers
      tls:
        certResolver: cloudflare

  services:
    my-service:
      loadBalancer:
        servers:
          - url: "https://s1.server.plansync.in"
          - url: "https://s2.server.plansync.in"
        passHostHeader: false
        healthCheck:
          path: "/"
          interval: "10s"

  middlewares:
    forward-headers:
      headers:
        # Forward specific headers to the backends
        customRequestHeaders:
          X-Forwarded-For: "{{.ClientIP}}"
          X-Real-IP: "{{.ClientIP}}"
          X-Forwarded-Proto: "{{.Protocol}}"
          X-Forwarded-Host: "{{.Host}}"
          X-Version: "{{.Request.Headers.X-Version}}"
          Authorization: "{{.Request.Headers.Authorization}}"
          User-Agent: "{{.Request.Headers.User-Agent}}"
